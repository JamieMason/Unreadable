#!/bin/bash

usage() {
cat << EOF
usage: $0 options

Applies a named task to be performed on a web page.

OPTIONS:
  -h    Show this message
  -u    URL to process
  -t    Task name to perform
EOF
}

URL=
TASK=
while getopts "hu:t:" OPTION
do
  case $OPTION in
    h)
      usage
      exit 1
      ;;
    u)
      URL=$OPTARG
      ;;
    t)
      TASK=$OPTARG
      ;;
    ?)
      usage
      exit
      ;;
  esac
done

if [[ -z $URL ]] || [[ -z $TASK ]]
then
  usage
  exit 1
fi

casperjs "${PWD}/src/js/asterisk.js" --cwd=$PWD --url=$URL --task=$TASK
